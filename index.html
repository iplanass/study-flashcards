<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EN ‚áÑ CA Flashcards</title>
  <style>
    :root {
      --bg: #f7f7f7;
      --card: #ffffff;
      --ink: #111827;
      --muted: #374151;
      --accent: #22c55e;
    }
    body.dark {
      --bg: #0f172a;
      --card: #111827;
      --ink: #e5e7eb;
      --muted: #9ca3af;
      --accent: #22c55e;
    }
    html,body {height:100%}
    body {
      margin:0;
      background: var(--bg);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      color: var(--ink);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .wrap{width:min(900px,95vw);padding:18px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    header h1{font-size:1.1rem;font-weight:600;margin:0;color:var(--ink)}
    header .sub{color:var(--muted);font-size:.9rem}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    button,input[type="file"],select{
      background:var(--card);
      border:1px solid rgba(0,0,0,0.12);
      border-radius:12px;
      color:var(--ink);
      padding:8px 12px;
      font-weight:600;
      cursor:pointer;
      transition:transform .05s ease,background .2s ease;
      font-size:0.95rem;
    }
    button:active{transform:scale(.98)}
    .primary{background:var(--accent);border-color:transparent;color:#071d10}
    .card{
      position:relative;
      background:var(--card);
      border:1px solid rgba(0,0,0,0.12);
      border-radius:16px;
      min-height:44vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:30px;
      user-select:none;
      box-shadow:0 10px 30px rgba(0,0,0,.12);
    }
    .term{font-size:clamp(28px,5vw,54px);font-weight:800;margin-bottom:10px}
    .desc{font-size:1rem;color:var(--muted);max-width:80%;line-height:1.3;white-space:pre-line}
    .lang{position:absolute;top:12px;left:16px;color:var(--muted);font-weight:700;font-size:.95rem}
    .status{position:absolute;top:12px;right:16px;color:var(--muted);font-size:.95rem}
    .row{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-top:12px}
    .grow{flex:1}
    .muted{color:var(--muted)}
    @media (max-width:520px){
      .card{padding:20px}
      .term{font-size:28px}
      button,input[type="file"],select{padding:8px 10px;font-size:.9rem}
    }
    .file-import {
      display:flex;
      gap:8px;
      align-items:center;
    }
    .file-import input[type="file"] {
      flex:1;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>EN ‚áÑ CA Flashcards</h1>
        <div class="sub">Click card to flip ‚Ä¢ <b>Space</b> to flip ‚Ä¢ <b>‚Üí</b>/<b>‚Üê</b> next/prev</div>
      </div>
      <div class="toolbar">
        <button id="modeBtn">üåô Toggle Mode</button>
        <button id="exportBtn">Export</button>
        <div class="file-import">
          <input type="file" id="importFile" accept=".json,application/json">
          <button id="importBtn">Import</button>
        </div>
        <button id="shuffleBtn">Shuffle</button>
      </div>
    </header>

    <main>
      <div class="card" id="card" role="button" tabindex="0" aria-pressed="false">
        <div class="lang" id="langLabel">EN</div>
        <div class="status" id="status">0 / 0</div>
        <div class="term" id="term">Loading‚Ä¶</div>
        <div class="desc" id="desc"></div>
      </div>

      <div class="row" style="margin-top:14px;">
        <div class="grow">
          <span class="muted">Deck:</span>
          <select id="deckSelect" aria-label="Select deck"></select>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <button id="prevBtn">‚Üê Prev</button>
          <button id="flipBtn" class="primary">Flip</button>
          <button id="nextBtn">Next ‚Üí</button>
        </div>
      </div>
    </main>
  </div>

  <script>
    // --- Default decks ---
    let decks = {
      "Unit 1: greetings and basics": [
        { "EN": "Hello", "CA": "Hola", "desc": "\n<i> </i>"},
        { "EN": "Bye!", "CA": "Ad√©u!", "desc": "<i> We may often hear it as 'deu, \n or even 'Ad√©u siau' or 'Passi-ho b√©' in some towns.</i>"},
        { "EN": "Good morning", "CA": "Bon dia", "desc": "\n<i> </i>"},
        { "EN": "Good night", "CA": "Bona nit", "desc": ""},
        { "EN": "Dog", "CA": "Gos", "desc": "El gos est√† al jard√≠.\n<i>The dog is in the garden.</i>" },
        { "EN": "Cat", "CA": "Gat", "desc": "Aquells dos sempre estan com gat i gos.\n<i>Those two are always arguing.</i>" },
        { "EN": "Bread", "CA": "Pa", "desc": "El pa amb tom√†quet √©s el meu menjar preferit.\n<i>My favourite food is bread with tomato.</i>" },
        { "EN": "Cheese", "CA": "Formatge", "desc": "Vols formatge?\n<i>Do you want cheese?</i>" },
        { "EN": "Apple", "CA": "Poma", "desc": "Aix√≤ √©s past√≠s de poma.\n<i>This is apple pie</i>" },
        { "EN": "Milk", "CA": "Llet", "desc": "No m'agrada la llet.\n<i>I don't like milk.</i>" },
        { "EN": "Water", "CA": "Aigua", "desc": "Necessito un got d‚Äôaigua.\n<i>I need a glass of water.</i>" },
        { "EN": "Coffee", "CA": "Caf√®", "desc": "El caf√® √©s molt fort.\n<i>The coffee is very strong.</i>" },
        { "EN": "Wine", "CA": "Vi", "desc": "Beuen vi negre per sopar.\n<i>They drink red wine for dinner.</i>" },
        { "EN": "Menu", "CA": "Carta", "desc": "Podria veure la carta?\n<i>Could I see the menu?</i>" },
        { "EN": "Train", "CA": "Tren", "desc": "El tren √©s m√©s r√†pid que el cotxe.\n<i>The train is faster than the car.</i>" },
        { "EN": "Bus", "CA": "Autob√∫s", "desc": "L'autob√∫s arriba d'aqu√≠ 15 minuts.\n<i>The bus arrives in 15 minutes.</i>" },
        { "EN": "Thank you", "CA": "Gr√†cies", "desc": "Moltes gr√†cies per la teva ajuda.\n<i>Thank you very much for your help.</i>" },
        { "EN": "Excuse me", "CA": "Perd√≥", "desc": "Perd√≥, pots repetir-ho?\n<i>Excuse me, can you repeat that?</i>" },
        { "EN": "Please", "CA": "Si us plau", "desc": "Una mica m√©s, si us plau.\n<i>A little more, please.</i>" }
      ],
      "Unit 2: numbers and restaurant": [
        { "EN": "How much does it cost?", "CA": "Quant costa?", "desc": "Quant costa el bitllet?\n<i>How much is the ticket?</i>" },
        { "EN": "How much is this?", "CA": "Quant val aix√≤?", "desc": "" },
        { "EN": "Where are the toilets?", "CA": "On s√≥n els labavos?", "desc": "" },
        { "EN": "Card or cash", "CA": "Targeta o efectiu", "desc": "Es pot pagar amb targeta o en efectiu.\n<i>You can pay by card or in cash.</i>" },
        { "EN": "Egg", "CA": "Ou", "desc": "L'ou o la gallina.\n<i>The egg or the chicken.</i>" },
        { "EN": "Tomato", "CA": "Tom√†quet", "desc": "Posa tom√†quet a l'amanida.\n<i>Add tomato to the salad.</i>" },
        { "EN": "The bill, please", "CA": "El compte, si us plau", "desc": "El compte, si us plau.\n<i>The bill, please.</i>" },
        { "EN": "I have a reservation", "CA": "Tinc una reserva", "desc": "Tinc una reserva a nom de Joan.\n<i>I have a reservation under Joan.</i>" },
        { "EN": "Table for two", "CA": "Taula per a dos", "desc": "Voldria una taula per a dos.\n<i>I‚Äôd like a table for two.</i>" },
        { "EN": "I'm vegeterian", "CA": "S√≥c vegeteri√†", "desc": "No menjo carn, s√≥c vegeteri√†.\n<i>I don¬¥t eat meat, I am vegetarian.</i>" },
        { "EN": "Allergy", "CA": "Al¬∑l√®rgia", "desc": "Tinc al¬∑l√®rgia a l'aspirina/S√≥c al¬∑l√®rgic a l'aspirina.\n<i>I have an aspirin allergy. When we see this 'l¬∑l', the L sound is slightly longer.</i>" },
        { "EN": "One, Two", "CA": "U, Dos", "desc": "El n√∫mero u ; un pl√†tan; una poma; dos √†necs; dues pastanagues. \n<i>Number one; one banana; one apple; two ducks; two carrots \n\n'U' often refers to number 1, while we use UN when counting things. UN and DOS become UNA or DUES when the object is femenin, as in the example. </i>" },
        { "EN": "Three, Four, Five", "CA": "Tres, Quatre, Cinc", "desc": "" },
        { "EN": "Six, Seven, Eight, Nine, Ten", "CA": "Sis, Set, Vuit, Nou, Deu", "desc": "" }
        { "EN": "A glass of wine, please", "CA": "Un got de vi, si us plau.", "desc": "In catalan, names have gender, in this case 'got' is masculin ('un got')." }
        { "EN": "A glass of water, please", "CA": "Un got d'aigua, si us plau.", "desc": "" }
        { "EN": "Do you have an English menu?", "CA": "Teniu un men√∫ en Angl√®s?", "desc": "" }
      ],
      "Unit 3: everyday life": [
        { "EN": "Car", "CA": "Cotxe", "desc": "El cotxe √©s m√©s lent que el tren.\n<i>The car is slower than the train.</i>" },
        { "EN": "Bicycle", "CA": "Bicicleta", "desc": "No s√© anar en bicicleta.\n<i>I don't know how to ride a bicycle.</i>" },
        { "EN": "Plane", "CA": "Avi√≥", "desc": "Hora de pujar a l'avi√≥.\n<i>Time to get on the plane.</i>" },
        { "EN": "Boat", "CA": "Vaixell", "desc": "Quan vaig amb vaixell em marejo.\n<i>I get seasick on boats.</i>" },
        { "EN": "Wake up", "CA": "Despertar-se", "desc": "Em desperto a les set.\n<i>I wake up at seven.</i>" },
        { "EN": "Go to work", "CA": "Anar a treballar", "desc": "Vaig a treballar en bicicleta.\n<i>I go to work by bicycle.</i>" },
        { "EN": "Cook dinner", "CA": "Cuinar el sopar", "desc": "Cuino el sopar per a la fam√≠lia.\n<i>I cook dinner for the family.</i>" },
        { "EN": "Today", "CA": "Avui", "desc": "Avui √©s dilluns.\n<i>Today is Monday.</i>" },
        { "EN": "Tomorrow", "CA": "Dem√†", "desc": "Dem√† anirem a la platja.\n<i>Tomorrow we‚Äôll go to the beach.</i>" },
        { "EN": "Morning", "CA": "Mat√≠", "desc": "Al mat√≠ prenc caf√®.\n<i>In the morning I drink coffee.</i>" },
        { "EN": "Teacher", "CA": "Mestre", "desc": "El mestre explica la lli√ß√≥.\n<i>The teacher explains the lesson.</i>" },
        { "EN": "Doctor", "CA": "Metge", "desc": "El metge em visita dem√†.\n<i>The doctor will see me tomorrow.</i>" },
        { "EN": "Medicine", "CA": "Medicina", "desc": "Pren la medicina cada mat√≠.\n<i>Take the medicine every morning.</i>" },
        { "EN": "Engineer", "CA": "Enginyer", "desc": "L‚Äôenginyer dissenya un pont nou.\n<i>The engineer designs a new bridge.</i>" },
        { "EN": "Tree", "CA": "Arbre", "desc": "Hi ha un arbre al jard√≠.\n<i>There is a tree in the garden.</i>" },
        { "EN": "Sea", "CA": "Mar", "desc": "El mar √©s blau.\n<i>The sea is blue.</i>" },
        { "EN": "Mountain", "CA": "Muntanya", "desc": "Pugem a la muntanya.\n<i>We climb the mountain.</i>" },
        { "EN": "Football", "CA": "Futbol", "desc": "Juguem a futbol cada diumenge.\n<i>We play football every Sunday.</i>" },
        { "EN": "Tennis", "CA": "Tenis", "desc": "El tenis √©s el meu esport preferit.\n<i>Tennis is my favourite sport.</i>" },
        { "EN": "Swimming", "CA": "Nataci√≥", "desc": "Faig nataci√≥ tres cops per setmana.\n<i>I swim three times a week.</i>" }
      ],
      "Unit 4: useful expressions": [
        { "EN": "Where is the station?", "CA": "On √©s l‚Äôestaci√≥?", "desc": "On √©s l‚Äôestaci√≥ de tren?\n<i>Where is the train station?</i>" },
        { "EN": "Left", "CA": "Esquerra", "desc": "Gira a l‚Äôesquerra.\n<i>Turn left.</i>" },
        { "EN": "Right", "CA": "Dreta", "desc": "El banc √©s a la dreta.\n<i>The bank is on the right.</i>" },
        { "EN": "Near", "CA": "A prop", "desc": "El supermercat √©s a prop d‚Äôaqu√≠.\n<i>The supermarket is near here.</i>" },
        { "EN": "It‚Äôs raining", "CA": "Plou", "desc": "Plou molt avui.\n<i>It‚Äôs raining a lot today.</i>" },
        { "EN": "It‚Äôs sunny", "CA": "Fa sol", "desc": "Avui fa molt sol.\n<i>It‚Äôs very sunny today.</i>" },
        { "EN": "It‚Äôs cold", "CA": "Fa fred", "desc": "A l‚Äôhivern fa molt fred en el meu poble.\n<i>It‚Äôs very cold in winter in my town.</i>" },
        { "EN": "Help!", "CA": "Ajuda!", "desc": "Ajuda! Hi ha un accident!\n<i>Help! There‚Äôs an accident!</i>" },
        { "EN": "Good afternoon", "CA": "Bona tarda / Bones tardes", "desc": "\n<i> You may here it sometimes as 'Bones' </i>"},
        { "EN": "See you later", "CA": "Fins despr√©s", "desc": "<i> Although if you'll meet again very soon, you may hear: 'Fins ara' \n literally: Until now </i>"},
        { "EN": "See you tomorrow", "CA": "Fins dem√†", "desc": "<i> Literally: Until tomorrow </i>"},
        { "EN": "Sleep tight", "CA": "Que dormis b√©", "desc": ""},
        { "EN": "Christmas", "CA": "Nadal", "desc": "Celebrem el Nadal amb la fam√≠lia.\n<i>We celebrate Christmas with family.</i>" },
        { "EN": "Easter", "CA": "Pasqua", "desc": "A la Pasqua mengem mona.\n<i>We eat Easter cake at Easter.</i>" },
        { "EN": "Saint Jorge", "CA": "Sant Jordi", "desc": "Per Sant Jordi regalem llibres i roses.\n<i>On Saint George‚Äôs Day we give books and roses.</i>" },
        { "EN": "Happy", "CA": "Feli√ß", "desc": "Estic molt feli√ß avui.\n<i>I am very happy today.</i>" },
        { "EN": "Sad", "CA": "Trist", "desc": "Ella est√† trista perqu√® plou.\n<i>She is sad because it‚Äôs raining.</i>" },
        { "EN": "Tired", "CA": "Cansat", "desc": "Despr√©s de treballar, estic cansat.\n<i>After work, I am tired.</i>" }
      ],
      "Unit 5: home and more numbers": [
        { "EN": "Chair", "CA": "Cadira", "desc": "Seu a la cadira.\n<i>Sit on the chair.</i>" },
        { "EN": "Table", "CA": "Taula", "desc": "La taula √©s de fusta.\n<i>The table is made of wood.</i>" },
        { "EN": "Door", "CA": "Porta", "desc": "Tanca la porta, si us plau.\n<i>Close the door, please.</i>" },
        { "EN": "Shirt", "CA": "Samarreta", "desc": "Porta una samarreta blanca.\n<i>He‚Äôs wearing a white shirt.</i>" },
        { "EN": "Trousers", "CA": "Pantalons", "desc": "Aquests pantalons s√≥n curts.\n<i>These trousers are short.</i>" },
        { "EN": "Shoes", "CA": "Sabates", "desc": "Les sabates s√≥n noves.\n<i>The shoes are new.</i>" },
        { "EN": "Mother", "CA": "Mare", "desc": "La meva mare √©s metgessa.\n<i>My mother is a doctor.</i>" },
        { "EN": "Father", "CA": "Pare", "desc": "El meu pare cuina molt b√©.\n<i>My father cooks very well.</i>" },
        { "EN": "Brother", "CA": "Germ√†", "desc": "El meu germ√† estudia a Barcelona.\n<i>My brother studies in Barcelona.</i>" },
        { "EN": "Eleven, Twelve, Thirteen, Fourteen, Fifteen", "CA": "Onze, Dotze, Tretze, Catorze, Quinze", "desc": "" },
        { "EN": "Sixteen, Seventeen, Eighteen, Nineteen", "CA": "Setze, Disset, Divuit, Dinou", "desc": "" },
        { "EN": "Twenty", "CA": "Vint", "desc": "21 = Vint-i-u, 22 = Vint-i-dos, 23 = Vint-i-tres, 24= Vint-i-quatre, 25 = Vint-i-cinc... \n <i>We use Vint-i-[number] \n\n Note that we add a 'i' between numbers, but this is only done for twenties. As before, one and two will be masculin or femenin depending on the object we count.</i>" },
        { "EN": "Thirty", "CA": "Trenta", "desc": "31 = Trenta-u, 32 = Trenta-dos, 33 = Trenta-tres, ... \n <i>We use trenta-[number]. \n\nNote that we don't add 'i' anymore. As before, one and two will be masculin or femenin depending on the object we count.</i>" },
        { "EN": "Forty, Fifty, Sixty, Seventy, Eighty, Ninety", "CA": "Quaranta, Cinquanta, Seixanta, Setanta, Vuitanta, Noranta", "desc": "<i>Numbers in between work as in Thirty</i>" },
        { "EN": "One hundred, two hundred, three hundred, ...", "CA": "Cent, Dos-cents, Tres-cents, ...", "desc": "[number]-cents" },
        { "EN": "Red", "CA": "Vermell", "desc": "La rosa √©s vermella.\n<i>The rose is red.</i>" },
        { "EN": "Blue", "CA": "Blau", "desc": "El cel √©s blau.\n<i>The sky is blue.</i>" },
        { "EN": "Green", "CA": "Verd", "desc": "L‚Äôherba √©s verda.\n<i>The grass is green.</i>" }
      ]
    };

    // --- State ---
    let currentDeckName = Object.keys(decks)[0] || null;
    let currentDeck = currentDeckName ? decks[currentDeckName] : [];
    let currentIndex = 0;
    let showingEN = true;
    let selectedFile = null;

    // --- DOM ---
    const deckSelect = document.getElementById("deckSelect");
    const flashcard = document.getElementById("card");
    const termEl = document.getElementById("term");
    const descEl = document.getElementById("desc");
    const langEl = document.getElementById("langLabel");
    const statusEl = document.getElementById("status");

    const flipBtn = document.getElementById("flipBtn");
    const nextBtn = document.getElementById("nextBtn");
    const prevBtn = document.getElementById("prevBtn");
    const exportBtn = document.getElementById("exportBtn");
    const importFile = document.getElementById("importFile");
    const importBtn = document.getElementById("importBtn");
    const modeBtn = document.getElementById("modeBtn");
    const shuffleBtn = document.getElementById("shuffleBtn");

    // --- Helpers ---
    function populateDecks() {
      const keys = Object.keys(decks);
      deckSelect.innerHTML = "";
      keys.forEach(name => {
        const opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name.charAt(0).toUpperCase() + name.slice(1);
        deckSelect.appendChild(opt);
      });
      if (currentDeckName && decks[currentDeckName]) {
        deckSelect.value = currentDeckName;
      } else {
        currentDeckName = keys[0] || null;
        deckSelect.value = currentDeckName || "";
      }
    }

    function loadDeck(name) {
      if (!name || !decks[name]) {
        currentDeck = [];
        currentDeckName = null;
        currentIndex = 0;
        showingEN = true;
        renderCard();
        return;
      }
      currentDeckName = name;
      currentDeck = decks[name];
      currentIndex = 0;
      showingEN = true;
      renderCard();
    }

    function renderCard() {
      if (!currentDeck || !currentDeck.length) {
        termEl.textContent = "No cards in this deck.";
        descEl.textContent = "";
        langEl.textContent = showingEN ? "EN" : "CA";
        statusEl.textContent = "0 / 0";
        flashcard.setAttribute("aria-pressed", "false");
        return;
      }
      const card = currentDeck[currentIndex];
      termEl.textContent = showingEN ? (card.EN || "") : (card.CA || "");
      descEl.innerHTML = showingEN ? "" : (card.desc || "");
      langEl.textContent = showingEN ? "EN" : "CA";
      statusEl.textContent = `${currentIndex + 1} / ${currentDeck.length}`;
      flashcard.setAttribute("aria-pressed", showingEN ? "false" : "true");
    }

    function flip() { showingEN = !showingEN; renderCard(); }
    function next() { if (currentDeck && currentIndex < currentDeck.length - 1) { currentIndex++; showingEN = true; renderCard(); } }
    function prev() { if (currentDeck && currentIndex > 0) { currentIndex--; showingEN = true; renderCard(); } }

    // --- Shuffle ---
    function shuffleDeck() {
      if (!currentDeck || currentDeck.length === 0) return;
      for (let i = currentDeck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [currentDeck[i], currentDeck[j]] = [currentDeck[j], currentDeck[i]];
      }
      currentIndex = 0;
      showingEN = true;
      renderCard();
    }

    // --- Events ---
    flipBtn.addEventListener("click", flip);
    nextBtn.addEventListener("click", next);
    prevBtn.addEventListener("click", prev);
    flashcard.addEventListener("click", flip);
    shuffleBtn.addEventListener("click", shuffleDeck);

    deckSelect.addEventListener("change", (e) => {
      loadDeck(e.target.value);
    });

    document.addEventListener("keydown", (e) => {
      if (e.code === "Space") { e.preventDefault(); flip(); }
      else if (e.code === "ArrowRight") { next(); }
      else if (e.code === "ArrowLeft") { prev(); }
    });

    // Export decks
    exportBtn.addEventListener("click", () => {
      try {
        const blob = new Blob([JSON.stringify(decks, null, 2)], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "flashcards.json";
        a.click();
        URL.revokeObjectURL(url);
      } catch (err) {
        alert("Export failed: " + err.message);
      }
    });

    // Import
    importFile.addEventListener("change", (e) => {
      selectedFile = e.target.files && e.target.files[0] ? e.target.files[0] : null;
    });

    importBtn.addEventListener("click", () => {
      if (!selectedFile) {
        alert("Please choose a JSON file first (using the file input).");
        return;
      }
      const reader = new FileReader();
      reader.onload = (evt) => {
        try {
          const imported = JSON.parse(evt.target.result);
          if (typeof imported !== "object" || imported === null || Array.isArray(imported)) {
            alert("Invalid JSON format: expected an object with deck names as keys.");
            return;
          }
          for (const deckName in imported) {
            if (!Object.prototype.hasOwnProperty.call(imported, deckName)) continue;
            const value = imported[deckName];
            if (!Array.isArray(value)) continue;
            decks[deckName] = value;
          }
          const prevDeck = currentDeckName;
          populateDecks();
          const toLoad = (prevDeck && decks[prevDeck]) ? prevDeck : (Object.keys(decks)[0] || null);
          if (toLoad) loadDeck(toLoad);
          alert("Import successful.");
          importFile.value = "";
          selectedFile = null;
        } catch (err) {
          alert("Error parsing JSON: " + (err && err.message ? err.message : String(err)));
        }
      };
      reader.readAsText(selectedFile);
    });

    // Dark/Light mode
    modeBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark");
    });

    // --- Init ---
    populateDecks();
    loadDeck(currentDeckName);
  </script>
</body>
</html>
